(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3197],{2398:(e,t,r)=>{Promise.resolve().then(r.bind(r,4450))},4450:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>v});var a=r(5155),s=r(9749),l=r(2508),n=r(6719),i=r(4815),d=r(9254),o=r(1560),c=r(2884),u=r(8173),m=r.n(u),f=r(6814),p=r(7058),h=r(3312),x=r(8986),y=r(3900),b=r(5564),j=r(288),g=r(7081),N=r(2115);function v(){var e;let{user:t}=(0,f.useUser)(),r=(0,f.useFirestore)(),{toast:u}=(0,b.dj)(),{isAdmin:v}=(0,j.z)(),[w,A]=(0,N.useState)(!1);(0,N.useEffect)(()=>{A(!0)},[]);let T=(0,f.useMemoFirebase)(()=>t&&r?(0,p.rJ)(r,"users",t.uid,"payments"):null,[r,null==t?void 0:t.uid]),{data:k,isLoading:R}=(0,f.useCollection)(T),S=(0,f.useMemoFirebase)(()=>t&&r?(0,p.H9)(r,"users",t.uid):null,[r,null==t?void 0:t.uid]),{data:E,isLoading:C}=(0,f.useDoc)(S),P=(0,f.useMemoFirebase)(()=>t&&r?(0,p.rJ)(r,"users",t.uid,"referrals"):null,[r,null==t?void 0:t.uid]),{data:M}=(0,f.useCollection)(P),D=null!==(e=null==M?void 0:M.length)&&void 0!==e?e:0,_=(0,N.useMemo)(()=>k?[...k].sort((e,t)=>t.date.toMillis()-e.date.toMillis()):[],[k]);return(0,a.jsxs)("div",{className:"space-y-8 animate-in fade-in duration-300",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold font-headline heading-red",children:"Payouts"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Manage your payout settings and history."})]}),v?(0,a.jsx)(s.Zp,{className:"bg-blue-50 border-blue-200",children:(0,a.jsxs)(s.aR,{className:"flex-row items-center gap-4",children:[(0,a.jsx)(i.A,{className:"h-8 w-8 text-blue-600 flex-shrink-0"}),(0,a.jsxs)("div",{children:[(0,a.jsx)(s.ZB,{className:"text-blue-800",children:"Admin Payouts Unlocked"}),(0,a.jsx)(s.BT,{className:"text-blue-700",children:"As an admin, your payouts are automatically enabled."})]})]})}):D>=2?(0,a.jsx)(s.Zp,{className:"bg-green-50 border-green-200",children:(0,a.jsxs)(s.aR,{className:"flex-row items-center gap-4",children:[(0,a.jsx)(d.A,{className:"h-8 w-8 text-green-600 flex-shrink-0"}),(0,a.jsxs)("div",{children:[(0,a.jsx)(s.ZB,{className:"text-green-800",children:"Payouts Unlocked!"}),(0,a.jsxs)(s.BT,{className:"text-green-700",children:["Congratulations on getting ",D," referrals!"]})]})]})}):(0,a.jsx)(s.Zp,{className:"bg-amber-50 border-amber-200",children:(0,a.jsxs)(s.aR,{className:"flex-row items-center gap-4",children:[(0,a.jsx)(o.A,{className:"h-8 w-8 text-amber-600 flex-shrink-0"}),(0,a.jsxs)("div",{children:[(0,a.jsx)(s.ZB,{className:"text-amber-800",children:"Activate Your Payouts"}),(0,a.jsxs)(s.BT,{className:"text-amber-700",children:["You have ",D," of 2 required referrals to start earning recurring commissions."]})]})]})}),(0,a.jsx)(s.Zp,{children:(0,a.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!S)return;let t=new FormData(e.currentTarget).get("paypal-email");(0,f.updateDocumentNonBlocking)(S,{paypalEmail:t}),u({title:"Changes Saved",description:"Your PayPal email has been updated."})},children:[(0,a.jsxs)(s.aR,{children:[(0,a.jsx)(s.ZB,{children:"Payout Information"}),(0,a.jsx)(s.BT,{children:"Commissions are sent to this PayPal email daily."})]}),(0,a.jsx)(s.Wu,{children:C?(0,a.jsx)(g.E,{className:"h-10 w-full"}):(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x.J,{htmlFor:"paypal-email",children:"PayPal Email"}),(0,a.jsx)(y.p,{id:"paypal-email",name:"paypal-email",type:"email",defaultValue:(null==E?void 0:E.paypalEmail)||"",required:!0})]})}),(0,a.jsx)(s.wL,{children:(0,a.jsx)(h.$,{type:"submit",disabled:C,children:"Save Changes"})})]})}),(0,a.jsxs)(s.Zp,{children:[(0,a.jsxs)(s.aR,{children:[(0,a.jsx)(s.ZB,{children:"Payout History"}),(0,a.jsx)(s.BT,{children:"Your complete history of commission payouts."})]}),(0,a.jsx)(s.Wu,{children:R?(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(g.E,{className:"h-10 w-full"}),(0,a.jsx)(g.E,{className:"h-10 w-full"})]}):_.length>0?(0,a.jsxs)(l.XI,{children:[(0,a.jsx)(l.A0,{children:(0,a.jsxs)(l.Hj,{children:[(0,a.jsx)(l.nd,{children:"Amount"}),(0,a.jsx)(l.nd,{children:"Date"}),(0,a.jsx)(l.nd,{className:"text-right",children:"Transaction ID"})]})}),(0,a.jsx)(l.BF,{children:_.map(e=>(0,a.jsxs)(l.Hj,{children:[(0,a.jsxs)(l.nA,{className:"font-medium text-green-600",children:["$",e.amount.toFixed(2)]}),(0,a.jsx)(l.nA,{children:w?(0,n.GP)(e.date.toDate(),"PPpp"):"..."}),(0,a.jsx)(l.nA,{className:"text-right font-mono text-xs",children:e.transactionId?(0,a.jsxs)(m(),{href:"https://www.paypal.com/activity/payment/".concat(e.transactionId),target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-end gap-2 hover:text-primary",children:[e.transactionId," ",(0,a.jsx)(c.A,{className:"h-3 w-3"})]}):(0,a.jsx)("span",{children:"Processing"})})]},e.id))})]}):(0,a.jsx)("div",{className:"text-center text-muted-foreground py-10 border-2 border-dashed rounded-lg bg-slate-50/50",children:(0,a.jsx)("p",{children:"No payout history to show yet."})})})]})]})}},9749:(e,t,r)=>{"use strict";r.d(t,{BT:()=>o,Wu:()=>c,ZB:()=>d,Zp:()=>n,aR:()=>i,wL:()=>u});var a=r(5155),s=r(2115),l=r(1567);let n=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s})});n.displayName="Card";let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",r),...s})});i.displayName="CardHeader";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("h3",{ref:t,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",r),...s})});d.displayName="CardTitle";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("p",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",r),...s})});o.displayName="CardDescription";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",r),...s})});c.displayName="CardContent";let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",r),...s})});u.displayName="CardFooter"},3900:(e,t,r)=>{"use strict";r.d(t,{p:()=>n});var a=r(5155),s=r(2115),l=r(1567);let n=s.forwardRef((e,t)=>{let{className:r,type:s,...n}=e;return(0,a.jsx)("input",{type:s,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...n})});n.displayName="Input"},8986:(e,t,r)=>{"use strict";r.d(t,{J:()=>o});var a=r(5155),s=r(2115),l=r(6195),n=r(1027),i=r(1567);let d=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(l.b,{ref:t,className:(0,i.cn)(d(),r),...s})});o.displayName=l.b.displayName},7081:(e,t,r)=>{"use strict";r.d(t,{E:()=>l});var a=r(5155),s=r(1567);function l(e){let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,s.cn)("animate-pulse rounded-md bg-muted",t),...r})}},2508:(e,t,r)=>{"use strict";r.d(t,{A0:()=>i,BF:()=>d,Hj:()=>o,XI:()=>n,nA:()=>u,nd:()=>c});var a=r(5155),s=r(2115),l=r(1567);let n=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:t,className:(0,l.cn)("w-full caption-bottom text-sm",r),...s})})});n.displayName="Table";let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("thead",{ref:t,className:(0,l.cn)("[&_tr]:border-b",r),...s})});i.displayName="TableHeader";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("tbody",{ref:t,className:(0,l.cn)("[&_tr:last-child]:border-0",r),...s})});d.displayName="TableBody",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("tfoot",{ref:t,className:(0,l.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...s})}).displayName="TableFooter";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("tr",{ref:t,className:(0,l.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r),...s})});o.displayName="TableRow";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("th",{ref:t,className:(0,l.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",r),...s})});c.displayName="TableHead";let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("td",{ref:t,className:(0,l.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",r),...s})});u.displayName="TableCell",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("caption",{ref:t,className:(0,l.cn)("mt-4 text-sm text-muted-foreground",r),...s})}).displayName="TableCaption"},288:(e,t,r)=>{"use strict";r.d(t,{z:()=>n});var a=r(6814),s=r(7058),l=r(2115);function n(){let{user:e,isUserLoading:t}=(0,a.useUser)(),r=(0,a.useFirestore)(),[n,i]=(0,l.useState)(!1),[d,o]=(0,l.useState)(!1),[c,u]=(0,l.useState)(!0),m=["rentapog@gmail.com","grantrizzo2@gmail.com"];return(0,l.useEffect)(()=>{var a;if(t)return;if(!e){i(!1),o(!1),u(!1);return}let l=null===(a=e.email)||void 0===a?void 0:a.toLowerCase();if(l&&m.includes(l)){i(!0),o(!0),u(!1);return}(async()=>{try{if(!r)return;let t=(0,s.H9)(r,"roles_admin",e.uid);(await (0,s.x7)(t)).exists()&&i(!0)}catch(e){}finally{u(!1)}})()},[null==e?void 0:e.uid,t,r]),{isAdmin:n,isPlatformOwner:d,isLoading:c}}},5564:(e,t,r)=>{"use strict";r.d(t,{dj:()=>m});var a=r(2115);let s=0,l=new Map,n=e=>{if(l.has(e))return;let t=setTimeout(()=>{l.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);l.set(e,t)},i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?n(r):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},d=[],o={toasts:[]};function c(e){o=i(o,e),d.forEach(e=>{e(o)})}function u(e){let{...t}=e,r=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>c({type:"DISMISS_TOAST",toastId:r});return c({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||a()}}}),{id:r,dismiss:a,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function m(){let[e,t]=a.useState(o);return a.useEffect(()=>(d.push(t),()=>{let e=d.indexOf(t);e>-1&&d.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},8068:(e,t,r)=>{"use strict";r.d(t,{s:()=>n,t:()=>l});var a=r(2115);function s(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function l(...e){return t=>{let r=!1,a=e.map(e=>{let a=s(e,t);return r||"function"!=typeof a||(r=!0),a});if(r)return()=>{for(let t=0;t<a.length;t++){let r=a[t];"function"==typeof r?r():s(e[t],null)}}}}function n(...e){return a.useCallback(l(...e),e)}},6195:(e,t,r)=>{"use strict";r.d(t,{b:()=>i});var a=r(2115),s=r(9997),l=r(5155),n=a.forwardRef((e,t)=>(0,l.jsx)(s.sG.label,{...e,ref:t,onMouseDown:t=>{var r;t.target.closest("button, input, select, textarea")||(null===(r=e.onMouseDown)||void 0===r||r.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));n.displayName="Label";var i=n},9997:(e,t,r)=>{"use strict";r.d(t,{sG:()=>u,hO:()=>m});var a=r(2115),s=r(7650),l=r(8068),n=r(5155),i=a.forwardRef((e,t)=>{let{children:r,...s}=e,l=a.Children.toArray(r),i=l.find(c);if(i){let e=i.props.children,r=l.map(t=>t!==i?t:a.Children.count(e)>1?a.Children.only(null):a.isValidElement(e)?e.props.children:null);return(0,n.jsx)(d,{...s,ref:t,children:a.isValidElement(e)?a.cloneElement(e,void 0,r):null})}return(0,n.jsx)(d,{...s,ref:t,children:r})});i.displayName="Slot";var d=a.forwardRef((e,t)=>{let{children:r,...s}=e;if(a.isValidElement(r)){let e=function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(r=(t=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in t&&t.isReactWarning)?e.props.ref:e.props.ref||e.ref}(r),n=function(e,t){let r={...t};for(let a in t){let s=e[a],l=t[a];/^on[A-Z]/.test(a)?s&&l?r[a]=(...e)=>{l(...e),s(...e)}:s&&(r[a]=s):"style"===a?r[a]={...s,...l}:"className"===a&&(r[a]=[s,l].filter(Boolean).join(" "))}return{...e,...r}}(s,r.props);return r.type!==a.Fragment&&(n.ref=t?(0,l.t)(t,e):e),a.cloneElement(r,n)}return a.Children.count(r)>1?a.Children.only(null):null});d.displayName="SlotClone";var o=({children:e})=>(0,n.jsx)(n.Fragment,{children:e});function c(e){return a.isValidElement(e)&&e.type===o}var u=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,t)=>{let r=a.forwardRef((e,r)=>{let{asChild:a,...s}=e,l=a?i:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,n.jsx)(l,{...s,ref:r})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function m(e,t){e&&s.flushSync(()=>e.dispatchEvent(t))}},2884:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(4057).A)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},9254:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(4057).A)("PartyPopper",[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"hbicv8"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17",key:"1i94pl"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7",key:"1cofks"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]])},4815:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(4057).A)("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},1560:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(4057).A)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[2992,3644,8249,9680,8173,615,9100,6814,8441,1517,7358],()=>t(2398)),_N_E=e.O()}]);