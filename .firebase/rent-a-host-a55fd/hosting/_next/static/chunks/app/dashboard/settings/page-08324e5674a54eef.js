(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4631],{3098:(e,s,t)=>{Promise.resolve().then(t.bind(t,838))},838:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>w});var a=t(5155),r=t(3312),i=t(9749),l=t(3900),n=t(5564),d=t(4815),o=t(9254),c=t(6758),u=t(2783),m=t(1354),p=t(6814),f=t(7058),x=t(399),h=t(2115),y=t(8002),j=t(288),v=t(8986),g=t(6046),N=t(7081),b=t(9130);function w(){let{user:e}=(0,p.useUser)(),s=(0,p.useAuth)(),t=(0,p.useFirestore)(),{toast:w}=(0,n.dj)(),{isPlatformOwner:A}=(0,j.z)(),k=(0,g.useRouter)(),[S,C]=(0,h.useState)(!1),[T,E]=(0,h.useState)(""),[M,R]=(0,h.useState)(!1),[D,O]=(0,h.useState)(null),_=(0,p.useMemoFirebase)(()=>e&&t?(0,f.H9)(t,"users",e.uid):null,[t,null==e?void 0:e.uid]),{data:I,isLoading:L}=(0,p.useDoc)(_),Z=(0,p.useMemoFirebase)(()=>(null==I?void 0:I.username)&&t?(0,f.H9)(t,"usernames",I.username.toLowerCase()):null,[t,null==I?void 0:I.username]),{data:F}=(0,p.useDoc)(Z),z=(null==I?void 0:I.username)?"https://hostproai.com/?ref=".concat(I.username.toLowerCase()):"",U=!!F&&F.uid===(null==e?void 0:e.uid),B=(0,h.useMemo)(()=>null==e?void 0:e.providerData.some(e=>"google.com"===e.providerId),[e]),H=async()=>{if(t&&e&&(null==I?void 0:I.username)&&_){C(!0);try{let s=(0,f.wP)(t),a=I.username.toLowerCase();s.update(_,{username:a}),s.set((0,f.H9)(t,"usernames",a),{uid:e.uid}),await s.commit(),w({title:"Success!",description:"Your affiliate link has been repaired."})}catch(e){w({variant:"destructive",title:"Repair Failed",description:e.message})}finally{C(!1)}}};return(0,a.jsxs)("div",{className:"space-y-8 animate-in fade-in duration-300",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold font-headline heading-red",children:"Settings"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Manage your account and affiliate tools."})]}),A&&(0,a.jsxs)(i.Zp,{className:"border-primary/50 bg-primary/5",children:[(0,a.jsx)(i.aR,{className:"bg-primary/10 py-4",children:(0,a.jsxs)(i.ZB,{className:"text-lg flex items-center gap-2",children:[(0,a.jsx)(d.A,{className:"h-5 w-5 text-primary"})," Administrator Guide"]})}),(0,a.jsx)(i.Wu,{className:"pt-6",children:(0,a.jsx)(b.nD,{type:"single",collapsible:!0,className:"w-full",children:(0,a.jsxs)(b.As,{value:"aws",children:[(0,a.jsx)(b.$m,{className:"text-sm",children:"AWS Amplify Hosting"}),(0,a.jsx)(b.ub,{className:"text-xs",children:"Follow the README instructions to deploy the frontend to AWS while keeping this backend."})]})})})]}),(0,a.jsxs)(i.Zp,{children:[(0,a.jsxs)(i.aR,{children:[(0,a.jsx)(i.ZB,{children:"Account Security"}),(0,a.jsx)(i.BT,{children:"Update your email address."})]}),(0,a.jsx)(i.Wu,{className:"space-y-4",children:L?(0,a.jsx)(N.E,{className:"h-20 w-full"}):B?(0,a.jsxs)(y.Fc,{className:"bg-muted",children:[(0,a.jsx)(y.XL,{children:"Google Account Managed"}),(0,a.jsx)(y.TN,{children:"Update your email via your Google Account settings."})]}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(v.J,{children:"Current Email"}),(0,a.jsx)(l.p,{value:(null==e?void 0:e.email)||"",disabled:!0,className:"bg-muted"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(v.J,{children:"New Email Address"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(l.p,{value:T,onChange:e=>E(e.target.value),placeholder:"new@example.com"}),(0,a.jsx)(r.$,{onClick:()=>(0,x.g0)(e,T),children:"Update"})]})]})]})})]}),(0,a.jsxs)(i.Zp,{children:[(0,a.jsx)(i.aR,{children:(0,a.jsx)(i.ZB,{children:"Affiliate Dashboard"})}),(0,a.jsx)(i.Wu,{children:L?(0,a.jsx)(N.E,{className:"h-24 w-full"}):(null==I?void 0:I.isAffiliate)?(0,a.jsxs)("div",{className:"flex items-center gap-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:[(0,a.jsx)(o.A,{className:"h-8 w-8 text-green-600"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold text-green-800",children:"Affiliate account is active."}),(0,a.jsx)("p",{className:"text-sm text-green-700",children:"Your referral link is ready."})]})]}):(0,a.jsx)(r.$,{onClick:()=>{_&&((0,p.updateDocumentNonBlocking)(_,{isAffiliate:!0}),w({title:"Congratulations!",description:"You are now an affiliate. Your referral link is active."}))},children:"Enable Affiliate Program"})})]}),(0,a.jsxs)(i.Zp,{children:[(0,a.jsx)(i.aR,{children:(0,a.jsx)(i.ZB,{children:"Your Link"})}),(0,a.jsxs)(i.Wu,{children:[L?(0,a.jsx)(N.E,{className:"h-10 w-full"}):(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(l.p,{value:z,readOnly:!0}),(0,a.jsx)(r.$,{variant:"outline",size:"icon",onClick:()=>{z&&(navigator.clipboard.writeText(z),w({title:"Copied to Clipboard!",description:"Your affiliate link has been copied."}))},children:(0,a.jsx)(c.A,{className:"h-4 w-4"})})]}),!L&&(null==I?void 0:I.isAffiliate)&&!U&&(0,a.jsx)(r.$,{onClick:H,className:"mt-4 w-full",disabled:S,children:S?(0,a.jsx)(u.A,{className:"animate-spin"}):"Repair Inactive Link"})]})]}),(0,a.jsx)("div",{className:"pt-4",children:(0,a.jsxs)(r.$,{variant:"destructive",onClick:()=>(0,x.CI)(s).then(()=>k.push("/login")),className:"w-full sm:w-auto",children:[(0,a.jsx)(m.A,{className:"mr-2 h-4 w-4"})," Sign Out"]})})]})}},9130:(e,s,t)=>{"use strict";t.d(s,{$m:()=>c,As:()=>o,nD:()=>d,ub:()=>u});var a=t(5155),r=t(2115),i=t(9362),l=t(2645),n=t(1567);let d=i.bL,o=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(i.q7,{ref:s,className:(0,n.cn)("border-b",t),...r})});o.displayName="AccordionItem";let c=r.forwardRef((e,s)=>{let{className:t,children:r,...d}=e;return(0,a.jsx)(i.Y9,{className:"flex",children:(0,a.jsxs)(i.l9,{ref:s,className:(0,n.cn)("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",t),...d,children:[r,(0,a.jsx)(l.A,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})})});c.displayName=i.l9.displayName;let u=r.forwardRef((e,s)=>{let{className:t,children:r,...l}=e;return(0,a.jsx)(i.UC,{ref:s,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...l,children:(0,a.jsx)("div",{className:(0,n.cn)("pb-4 pt-0",t),children:r})})});u.displayName=i.UC.displayName},9749:(e,s,t)=>{"use strict";t.d(s,{BT:()=>o,Wu:()=>c,ZB:()=>d,Zp:()=>l,aR:()=>n,wL:()=>u});var a=t(5155),r=t(2115),i=t(1567);let l=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...r})});l.displayName="Card";let n=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",t),...r})});n.displayName="CardHeader";let d=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("h3",{ref:s,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",t),...r})});d.displayName="CardTitle";let o=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("p",{ref:s,className:(0,i.cn)("text-sm text-muted-foreground",t),...r})});o.displayName="CardDescription";let c=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,i.cn)("p-6 pt-0",t),...r})});c.displayName="CardContent";let u=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,i.cn)("flex items-center p-6 pt-0",t),...r})});u.displayName="CardFooter"},3900:(e,s,t)=>{"use strict";t.d(s,{p:()=>l});var a=t(5155),r=t(2115),i=t(1567);let l=r.forwardRef((e,s)=>{let{className:t,type:r,...l}=e;return(0,a.jsx)("input",{type:r,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:s,...l})});l.displayName="Input"},8986:(e,s,t)=>{"use strict";t.d(s,{J:()=>o});var a=t(5155),r=t(2115),i=t(6195),l=t(1027),n=t(1567);let d=(0,l.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(i.b,{ref:s,className:(0,n.cn)(d(),t),...r})});o.displayName=i.b.displayName},7081:(e,s,t)=>{"use strict";t.d(s,{E:()=>i});var a=t(5155),r=t(1567);function i(e){let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,r.cn)("animate-pulse rounded-md bg-muted",s),...t})}},288:(e,s,t)=>{"use strict";t.d(s,{z:()=>l});var a=t(6814),r=t(7058),i=t(2115);function l(){let{user:e,isUserLoading:s}=(0,a.useUser)(),t=(0,a.useFirestore)(),[l,n]=(0,i.useState)(!1),[d,o]=(0,i.useState)(!1),[c,u]=(0,i.useState)(!0),m=["rentapog@gmail.com","grantrizzo2@gmail.com"];return(0,i.useEffect)(()=>{var a;if(s)return;if(!e){n(!1),o(!1),u(!1);return}let i=null===(a=e.email)||void 0===a?void 0:a.toLowerCase();if(i&&m.includes(i)){n(!0),o(!0),u(!1);return}(async()=>{try{if(!t)return;let s=(0,r.H9)(t,"roles_admin",e.uid);(await (0,r.x7)(s)).exists()&&n(!0)}catch(e){}finally{u(!1)}})()},[null==e?void 0:e.uid,s,t]),{isAdmin:l,isPlatformOwner:d,isLoading:c}}},5564:(e,s,t)=>{"use strict";t.d(s,{dj:()=>m});var a=t(2115);let r=0,i=new Map,l=e=>{if(i.has(e))return;let s=setTimeout(()=>{i.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,s)},n=(e,s)=>{switch(s.type){case"ADD_TOAST":return{...e,toasts:[s.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===s.toast.id?{...e,...s.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=s;return t?l(t):e.toasts.forEach(e=>{l(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===s.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==s.toastId)}}},d=[],o={toasts:[]};function c(e){o=n(o,e),d.forEach(e=>{e(o)})}function u(e){let{...s}=e,t=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>c({type:"DISMISS_TOAST",toastId:t});return c({type:"ADD_TOAST",toast:{...s,id:t,open:!0,onOpenChange:e=>{e||a()}}}),{id:t,dismiss:a,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function m(){let[e,s]=a.useState(o);return a.useEffect(()=>(d.push(s),()=>{let e=d.indexOf(s);e>-1&&d.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},6195:(e,s,t)=>{"use strict";t.d(s,{b:()=>n});var a=t(2115),r=t(9997),i=t(5155),l=a.forwardRef((e,s)=>(0,i.jsx)(r.sG.label,{...e,ref:s,onMouseDown:s=>{var t;s.target.closest("button, input, select, textarea")||(null===(t=e.onMouseDown)||void 0===t||t.call(e,s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));l.displayName="Label";var n=l},6758:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(4057).A)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},1354:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(4057).A)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},9254:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(4057).A)("PartyPopper",[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"hbicv8"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17",key:"1i94pl"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7",key:"1cofks"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]])},4815:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(4057).A)("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])}},e=>{var s=s=>e(e.s=s);e.O(0,[2992,3644,8249,9680,615,405,5511,6814,8441,1517,7358],()=>s(3098)),_N_E=e.O()}]);