(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2654],{8235:(e,s,r)=>{Promise.resolve().then(r.bind(r,1932))},1932:(e,s,r)=>{"use strict";r.d(s,{UpgradeContent:()=>A});var a=r(5155),t=r(9749),i=r(3312),o=r(3261),n=r(6814),l=r(7058),c=r(530),d=r(5564),u=r(1567),p=r(2115),m=r(6046),f=r(8002),F=r(9034),S=r(7081),g=r(7358);function A(){let{user:e}=(0,n.useUser)(),s=(0,n.useFirestore)(),{toast:r}=(0,d.dj)(),A=(0,m.useRouter)(),[b,E]=(0,p.useState)(!1),[y,v]=(0,p.useState)(!1),[x,I]=(0,p.useState)(null),[N,h]=(0,p.useState)(null);(0,p.useEffect)(()=>{E(!0)},[]);let P="false"!==g.env.PAYPAL_SANDBOX?"REPLACE_WITH_PAYPAL_SANDBOX_CLIENT_ID":"AX9soqBnQ-2Nt3zk6EX0na4714WB9eqbQw4tSyRSSEbsnSiH8J6HF7ZrtBSEJ8ojro-JjwUAAUB4z2ec",_=(0,m.useSearchParams)(),C=(0,n.useMemoFirebase)(()=>e&&s?(0,l.H9)(s,"users",e.uid):null,[s,null==e?void 0:e.uid]),{data:D,isLoading:L}=(0,n.useDoc)(C);(0,p.useEffect)(()=>{var e;let s=_.get("plan");s&&c.nb.some(e=>e.id===s)?h(s):(null==D?void 0:null===(e=D.subscription)||void 0===e?void 0:e.status)==="inactive"&&D.subscription.tierId&&h(D.subscription.tierId)},[_,D]);let B=(0,p.useMemo)(()=>{var e,s;if(!(null==D?void 0:D.subscription)||"inactive"===D.subscription.status)return c.nb;let r=null!==(s=null===(e=c.nb.find(e=>{var s;return e.id===(null===(s=D.subscription)||void 0===s?void 0:s.tierId)}))||void 0===e?void 0:e.price)&&void 0!==s?s:0;return c.nb.filter(e=>e.price>r)},[D]),T=async s=>{if(I(null),!N||!e)throw Error("Missing selection or session.");let r=await fetch("/api/paypal",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"create_subscription",planId:N,customId:e.uid})}),a=await r.json();if(r.ok&&a.subscriptionId)return a.subscriptionId;throw Error(a.error||"PayPal error")},j=async r=>{v(!0);try{var a;if(!C||!N||!D)throw Error("No session");let t=c.nb.find(e=>e.id===N),i=(null===(a=D.subscription)||void 0===a?void 0:a.status)==="active",o=(0,l.wP)(s),n=new Date;if(n.setDate(n.getDate()+3),o.update(C,{subscription:{tierId:N,status:"active",startDate:(0,l.O5)(),endDate:null,trialEndDate:i?null:l.Dc.fromDate(n),paypalSubscriptionId:r.subscriptionID}}),!i&&D.referredBy){let r=(0,l.H9)(s,"users",D.referredBy,"referrals",e.uid);o.update(r,{activationStatus:"activated",grossSale:t.price})}await o.commit(),A.push("/dashboard")}catch(e){I(e.message)}finally{v(!1)}};return b?!P||P.includes("REPLACE_WITH")?(0,a.jsxs)(f.Fc,{variant:"destructive",children:[(0,a.jsx)(f.XL,{children:"Gateway Error"}),(0,a.jsx)(f.TN,{children:"PayPal not configured."})]}):(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold font-headline heading-red",children:"Manage Subscription"}),x&&(0,a.jsx)(f.Fc,{variant:"destructive",children:(0,a.jsx)(f.TN,{children:x})}),(0,a.jsx)(F.ag,{options:{clientId:P,vault:!0,intent:"subscription"},children:N?(()=>{let e=c.nb.find(e=>e.id===N);return e?(0,a.jsxs)(t.Zp,{className:"max-w-md mx-auto",children:[(0,a.jsx)(t.aR,{children:(0,a.jsx)(t.ZB,{children:e.name})}),(0,a.jsxs)(t.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"text-4xl font-bold",children:["$",e.price.toFixed(2)]}),(0,a.jsx)("ul",{className:"space-y-2",children:e.features.map((e,s)=>(0,a.jsxs)("li",{className:"text-sm flex gap-2",children:[(0,a.jsx)(o.A,{className:"h-4 w-4 text-green-500"})," ",e]},s))})]}),(0,a.jsxs)(t.wL,{className:"flex-col gap-4",children:[(0,a.jsx)(F.JV,{style:{layout:"vertical"},createSubscription:T,onApprove:j}),(0,a.jsx)(i.$,{variant:"ghost",onClick:()=>h(null),children:"Change Plan"})]})]}):null})():(0,a.jsx)("div",{className:"grid gap-6 md:grid-cols-3",children:L?[void 0,void 0,void 0].map((e,s)=>(0,a.jsx)(S.E,{className:"h-64"},s)):B.map(e=>(0,a.jsxs)(t.Zp,{className:(0,u.cn)(e.isMostPopular&&"border-primary shadow-lg"),children:[(0,a.jsxs)(t.aR,{children:[(0,a.jsx)(t.ZB,{children:e.name}),(0,a.jsxs)("div",{className:"text-2xl font-bold",children:["$",e.price]})]}),(0,a.jsx)(t.wL,{children:(0,a.jsxs)(i.$,{className:"w-full",onClick:()=>h(e.id),children:["Select ",e.name]})})]},e.id))})})]}):(0,a.jsx)(S.E,{className:"h-96 w-full"})}},9749:(e,s,r)=>{"use strict";r.d(s,{BT:()=>c,Wu:()=>d,ZB:()=>l,Zp:()=>o,aR:()=>n,wL:()=>u});var a=r(5155),t=r(2115),i=r(1567);let o=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)("div",{ref:s,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...t})});o.displayName="Card";let n=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)("div",{ref:s,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",r),...t})});n.displayName="CardHeader";let l=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)("h3",{ref:s,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",r),...t})});l.displayName="CardTitle";let c=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)("p",{ref:s,className:(0,i.cn)("text-sm text-muted-foreground",r),...t})});c.displayName="CardDescription";let d=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)("div",{ref:s,className:(0,i.cn)("p-6 pt-0",r),...t})});d.displayName="CardContent";let u=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)("div",{ref:s,className:(0,i.cn)("flex items-center p-6 pt-0",r),...t})});u.displayName="CardFooter"},7081:(e,s,r)=>{"use strict";r.d(s,{E:()=>i});var a=r(5155),t=r(1567);function i(e){let{className:s,...r}=e;return(0,a.jsx)("div",{className:(0,t.cn)("animate-pulse rounded-md bg-muted",s),...r})}},5564:(e,s,r)=>{"use strict";r.d(s,{dj:()=>p});var a=r(2115);let t=0,i=new Map,o=e=>{if(i.has(e))return;let s=setTimeout(()=>{i.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,s)},n=(e,s)=>{switch(s.type){case"ADD_TOAST":return{...e,toasts:[s.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===s.toast.id?{...e,...s.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=s;return r?o(r):e.toasts.forEach(e=>{o(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===s.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==s.toastId)}}},l=[],c={toasts:[]};function d(e){c=n(c,e),l.forEach(e=>{e(c)})}function u(e){let{...s}=e,r=(t=(t+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>d({type:"DISMISS_TOAST",toastId:r});return d({type:"ADD_TOAST",toast:{...s,id:r,open:!0,onOpenChange:e=>{e||a()}}}),{id:r,dismiss:a,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function p(){let[e,s]=a.useState(c);return a.useEffect(()=>(l.push(s),()=>{let e=l.indexOf(s);e>-1&&l.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},530:(e,s,r)=>{"use strict";r.d(s,{nb:()=>a,qK:()=>t});let a=[{id:"starter",name:"Starter",price:4.95,paypalPlanId_Sandbox:"P-11976043Y1636863PNF67FXA",paypalPlanId_Live:"REPLACE_WITH_LIVE_PLAN_ID",description:"Launch your affiliate journey with these essential tools.",guideAccessLevel:"starter",features:["3 Websites","20 GB NVMe Storage","Free SSL Certificates","Daily Backups","Basic AI Content Tools","Access to Starter Marketing Guides","Standard Support","70% Affiliate Commission"]},{id:"plus",name:"Plus",price:19.95,paypalPlanId_Sandbox:"P-1EG68235K3435163JNF7SDFA",paypalPlanId_Live:"REPLACE_WITH_LIVE_PLAN_ID",description:"Everything in Starter, plus more power and speed.",guideAccessLevel:"plus",features:["10 Websites","50 GB NVMe Storage","Global CDN for faster loading speeds","Free SSL Certificates","Daily Backups","Standard AI Suite","Access to Plus Marketing Guides","Standard Support","70% Affiliate Commission"]},{id:"pro",name:"Pro",price:49.95,paypalPlanId_Sandbox:"P-5W037679NJ177610XNF7SEFQ",paypalPlanId_Live:"REPLACE_WITH_LIVE_PLAN_ID",description:"Professional tools for serious affiliates.",guideAccessLevel:"pro",features:["25 Websites","100 GB NVMe Storage","1-Click Staging Environment","Global CDN for faster loading speeds","Free SSL Certificates","Daily Backups","Advanced AI Suite","Access to Pro Marketing Guides","Priority Support","70% Base / 75% Target Commission"],isMostPopular:!0},{id:"business",name:"Business",price:99.95,paypalPlanId_Sandbox:"P-6JG346243U749934ENF7SFSA",paypalPlanId_Live:"REPLACE_WITH_LIVE_PLAN_ID",description:"Business tools for established agencies.",guideAccessLevel:"business",features:["75 Websites","250 GB NVMe Storage","Dedicated IP Address","1-Click Staging Environment","Global CDN for faster loading speeds","Free SSL Certificates","Daily Backups","Pro AI Suite","Access to Business Marketing Guides","Priority Support","70% Base / 75% Target Commission"]},{id:"scale",name:"Scale",price:299.95,paypalPlanId_Sandbox:"P-9SY225236J3759335NF7SGRQ",paypalPlanId_Live:"REPLACE_WITH_LIVE_PLAN_ID",description:"Tools for scaling your operations.",guideAccessLevel:"scale",features:["150 Websites","500 GB NVMe Storage","Dedicated IP Address","1-Click Staging Environment","Global CDN for faster loading speeds","Free SSL Certificates","Daily Backups","Business AI Suite","Access to Scale-Level Marketing Guides","Dedicated Support","70% Base / 75% Target Commission"]},{id:"enterprise",name:"Enterprise",price:499.95,paypalPlanId_Sandbox:"P-5Y2152619Y596201DNF7SHLI",paypalPlanId_Live:"REPLACE_WITH_LIVE_PLAN_ID",description:"Enterprise-grade tools for power-users.",guideAccessLevel:"enterprise",features:["Unlimited Websites","1 TB NVMe Storage","Dedicated IP Address","1-Click Staging Environment","Global CDN for faster loading speeds","Free SSL Certificates","Daily Backups","Enterprise AI Suite","Access to Enterprise Marketing Guides","Dedicated Account Manager","70% Base / 75% Target Commission"]}],t=[{name:"Vibrant Violet",colors:{"--primary-color":"#8B5CF6","--secondary-color":"#EC4899","--background-color":"#F5F3FF","--card-background":"#FFFFFF","--text-color":"#1F2937","--muted-color":"#6B7280"}},{name:"Crimson Tide",colors:{"--primary-color":"#DC2626","--secondary-color":"#F472B6","--background-color":"#FEF2F2","--card-background":"#FFFFFF","--text-color":"#1F2937","--muted-color":"#6B7280"}},{name:"Forest Green",colors:{"--primary-color":"#16A34A","--secondary-color":"#84CC16","--background-color":"#F0FDF4","--card-background":"#FFFFFF","--text-color":"#1F2937","--muted-color":"#6B7280"}},{name:"Ocean Blue",colors:{"--primary-color":"#2563EB","--secondary-color":"#22D3EE","--background-color":"#EFF6FF","--card-background":"#FFFFFF","--text-color":"#1F2937","--muted-color":"#6B7280"}},{name:"Sunset Orange",colors:{"--primary-color":"#F97316","--secondary-color":"#FACC15","--background-color":"#FFF7ED","--card-background":"#FFFFFF","--text-color":"#1F2937","--muted-color":"#6B7280"}},{name:"Midnight Glow",colors:{"--primary-color":"#38BDF8","--secondary-color":"#A78BFA","--background-color":"#111827","--card-background":"#1F2937","--text-color":"#F9FAFB","--muted-color":"#9CA3AF"}},{name:"Chocolate Caramel",colors:{"--primary-color":"#78350F","--secondary-color":"#F59E0B","--background-color":"#FEFCE8","--card-background":"#FFFFFF","--text-color":"#1F2937","--muted-color":"#6B7280"}}]}},e=>{var s=s=>e(e.s=s);e.O(0,[2992,3644,8249,9680,615,5641,6814,8441,1517,7358],()=>s(8235)),_N_E=e.O()}]);