(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6475],{8332:(e,t,s)=>{Promise.resolve().then(s.bind(s,984))},6046:(e,t,s)=>{"use strict";var a=s(6658);s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})},984:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>w});var a=s(5155),r=s(2115),n=s(3312),i=s(9749),l=s(2508),d=s(5564),o=s(2604),c=s(2783),u=s(3261),m=s(6848),h=s(4815),f=s(288),x=s(6814),p=s(7058),j=s(5121),g=s(6046),v=s(6698),N=s(8173),b=s.n(N),y=s(7081);function w(){let{toast:e}=(0,d.dj)(),t=(0,x.useFirestore)(),{isPlatformOwner:s,isLoading:N}=(0,f.z)(),[w,A]=(0,r.useState)(null),T=(0,g.useRouter)();(0,r.useEffect)(()=>{N||s||T.push("/dashboard")},[s,N,T]);let C=(0,x.useMemoFirebase)(()=>t&&s?(0,p.rJ)(t,"users"):null,[t,s]),{data:S,isLoading:k}=(0,x.useCollection)(C),D=(0,r.useMemo)(()=>{var e;return null!==(e=null==S?void 0:S.filter(e=>e.customDomain&&"unconfigured"!==e.customDomain.status))&&void 0!==e?e:[]},[S]),R=(0,r.useMemo)(()=>D.filter(e=>{var t;return(null===(t=e.customDomain)||void 0===t?void 0:t.status)==="pending"}).length,[D]),E=async s=>{if(!t||!s.customDomain)return;A(s.id);let a=(0,p.H9)(t,"users",s.id);(0,x.updateDocumentNonBlocking)(a,{"customDomain.status":"connected"}),e({title:"Domain Connected",description:"User ".concat(s.username," has been notified that ").concat(s.customDomain.name," is live.")}),A(null)},_="https://console.firebase.google.com/project/".concat(v.C.projectId,"/hosting/custom-domains"),M=s||N;return(0,a.jsxs)("div",{className:"space-y-8 animate-in fade-in duration-300",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold font-headline heading-red",children:"Manage Custom Domains"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Fulfill domain setup requests from your users."})]}),(0,a.jsx)(n.$,{asChild:!0,variant:"outline",children:(0,a.jsxs)(b(),{href:_,target:"_blank",rel:"noopener noreferrer",children:["Open Firebase Console ",(0,a.jsx)(o.A,{className:"ml-2 h-4 w-4"})]})})]}),(0,a.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:(0,a.jsxs)(i.Zp,{children:[(0,a.jsx)(i.aR,{className:"pb-2",children:(0,a.jsx)(i.ZB,{className:"text-sm font-medium text-muted-foreground uppercase",children:"Pending Requests"})}),(0,a.jsx)(i.Wu,{children:!M||k?(0,a.jsx)(y.E,{className:"h-8 w-12"}):(0,a.jsx)("div",{className:"text-2xl font-bold",children:R})})]})}),(0,a.jsxs)(i.Zp,{children:[(0,a.jsxs)(i.aR,{children:[(0,a.jsx)(i.ZB,{children:"Domain Requests"}),(0,a.jsx)(i.BT,{children:"When a user submits a domain, it appears here. Add it to Firebase Hosting, then mark it as connected."})]}),(0,a.jsx)(i.Wu,{children:!M||k?(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(y.E,{className:"h-10 w-full"}),(0,a.jsx)(y.E,{className:"h-10 w-full"})]}):D.length>0?(0,a.jsxs)(l.XI,{children:[(0,a.jsx)(l.A0,{children:(0,a.jsxs)(l.Hj,{children:[(0,a.jsx)(l.nd,{children:"User"}),(0,a.jsx)(l.nd,{children:"Domain Name"}),(0,a.jsx)(l.nd,{children:"Status"}),(0,a.jsx)(l.nd,{className:"text-right",children:"Action"})]})}),(0,a.jsx)(l.BF,{children:D.sort((e,t)=>{var s;return(null===(s=e.customDomain)||void 0===s?void 0:s.status)==="pending"?-1:1}).map(e=>{var t,s,r,i,d,m;return(0,a.jsxs)(l.Hj,{children:[(0,a.jsxs)(l.nA,{children:[(0,a.jsx)("div",{className:"font-medium",children:e.username}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:e.email})]}),(0,a.jsx)(l.nA,{className:"font-mono text-sm",children:(0,a.jsxs)("a",{href:"https://".concat(null===(t=e.customDomain)||void 0===t?void 0:t.name),target:"_blank",rel:"noopener noreferrer",className:"hover:underline flex items-center gap-1",children:[null===(s=e.customDomain)||void 0===s?void 0:s.name,(0,a.jsx)(o.A,{className:"h-3 w-3"})]})}),(0,a.jsx)(l.nA,{children:(0,a.jsx)(j.E,{variant:(null===(r=e.customDomain)||void 0===r?void 0:r.status)==="connected"?"secondary":"default",className:(null===(i=e.customDomain)||void 0===i?void 0:i.status)==="pending"?"bg-amber-500 text-white animate-pulse":"bg-green-500 text-white",children:null===(d=e.customDomain)||void 0===d?void 0:d.status})}),(0,a.jsx)(l.nA,{className:"text-right",children:(null===(m=e.customDomain)||void 0===m?void 0:m.status)==="pending"&&(0,a.jsxs)(n.$,{variant:"default",size:"sm",onClick:()=>E(e),disabled:w===e.id,children:[w===e.id?(0,a.jsx)(c.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,a.jsx)(u.A,{className:"mr-2 h-4 w-4"}),"Mark as Connected"]})})]},e.id)})})]}):(0,a.jsxs)("div",{className:"text-center text-muted-foreground py-10",children:[(0,a.jsx)(m.A,{className:"mx-auto h-12 w-12 text-gray-400 opacity-20"}),(0,a.jsx)("p",{className:"mt-4 font-semibold",children:"No domain requests yet."}),(0,a.jsx)("p",{className:"text-sm",children:"User requests will appear here once they submit their domains."})]})})]}),(0,a.jsxs)(i.Zp,{className:"border-primary/20 bg-primary/5",children:[(0,a.jsx)(i.aR,{children:(0,a.jsxs)(i.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(h.A,{className:"h-5 w-5 text-primary"}),"How to fulfill a request"]})}),(0,a.jsx)(i.Wu,{className:"text-sm space-y-4",children:(0,a.jsxs)("ol",{className:"list-decimal list-inside space-y-2",children:[(0,a.jsx)("li",{children:"Copy the domain name from the table above."}),(0,a.jsxs)("li",{children:["Click ",(0,a.jsx)("strong",{children:'"Open Firebase Console"'})," to go to the Hosting settings."]}),(0,a.jsxs)("li",{children:["Click ",(0,a.jsx)("strong",{children:'"Add custom domain"'})," and paste the domain name."]}),(0,a.jsxs)("li",{children:["Follow the instructions in the Firebase wizard to get the ",(0,a.jsx)("strong",{children:"A Records"})," (IP addresses)."]}),(0,a.jsx)("li",{children:"Go to your domain registrar (e.g. GoDaddy) and add those A Records to the domain's DNS settings."}),(0,a.jsxs)("li",{children:["Once done, click ",(0,a.jsx)("strong",{children:'"Mark as Connected"'}),' here so the user sees the "Live" badge on their dashboard.']})]})})]})]})}},5121:(e,t,s)=>{"use strict";s.d(t,{E:()=>l});var a=s(5155);s(2115);var r=s(1027),n=s(1567);let i=(0,r.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:s,...r}=e;return(0,a.jsx)("div",{className:(0,n.cn)(i({variant:s}),t),...r})}},9749:(e,t,s)=>{"use strict";s.d(t,{BT:()=>o,Wu:()=>c,ZB:()=>d,Zp:()=>i,aR:()=>l,wL:()=>u});var a=s(5155),r=s(2115),n=s(1567);let i=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...r})});i.displayName="Card";let l=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),...r})});l.displayName="CardHeader";let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",s),...r})});d.displayName="CardTitle";let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",s),...r})});o.displayName="CardDescription";let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",s),...r})});c.displayName="CardContent";let u=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",s),...r})});u.displayName="CardFooter"},7081:(e,t,s)=>{"use strict";s.d(t,{E:()=>n});var a=s(5155),r=s(1567);function n(e){let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,r.cn)("animate-pulse rounded-md bg-muted",t),...s})}},2508:(e,t,s)=>{"use strict";s.d(t,{A0:()=>l,BF:()=>d,Hj:()=>o,XI:()=>i,nA:()=>u,nd:()=>c});var a=s(5155),r=s(2115),n=s(1567);let i=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:t,className:(0,n.cn)("w-full caption-bottom text-sm",s),...r})})});i.displayName="Table";let l=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("thead",{ref:t,className:(0,n.cn)("[&_tr]:border-b",s),...r})});l.displayName="TableHeader";let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("tbody",{ref:t,className:(0,n.cn)("[&_tr:last-child]:border-0",s),...r})});d.displayName="TableBody",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("tfoot",{ref:t,className:(0,n.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s),...r})}).displayName="TableFooter";let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("tr",{ref:t,className:(0,n.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",s),...r})});o.displayName="TableRow";let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("th",{ref:t,className:(0,n.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",s),...r})});c.displayName="TableHead";let u=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("td",{ref:t,className:(0,n.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",s),...r})});u.displayName="TableCell",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("caption",{ref:t,className:(0,n.cn)("mt-4 text-sm text-muted-foreground",s),...r})}).displayName="TableCaption"},288:(e,t,s)=>{"use strict";s.d(t,{z:()=>i});var a=s(6814),r=s(7058),n=s(2115);function i(){let{user:e,isUserLoading:t}=(0,a.useUser)(),s=(0,a.useFirestore)(),[i,l]=(0,n.useState)(!1),[d,o]=(0,n.useState)(!1),[c,u]=(0,n.useState)(!0),m=["rentapog@gmail.com","grantrizzo2@gmail.com"];return(0,n.useEffect)(()=>{var a;if(t)return;if(!e){l(!1),o(!1),u(!1);return}let n=null===(a=e.email)||void 0===a?void 0:a.toLowerCase();if(n&&m.includes(n)){l(!0),o(!0),u(!1);return}(async()=>{try{if(!s)return;let t=(0,r.H9)(s,"roles_admin",e.uid);(await (0,r.x7)(t)).exists()&&l(!0)}catch(e){}finally{u(!1)}})()},[null==e?void 0:e.uid,t,s]),{isAdmin:i,isPlatformOwner:d,isLoading:c}}},5564:(e,t,s)=>{"use strict";s.d(t,{dj:()=>m});var a=s(2115);let r=0,n=new Map,i=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},l=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?i(s):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},d=[],o={toasts:[]};function c(e){o=l(o,e),d.forEach(e=>{e(o)})}function u(e){let{...t}=e,s=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>c({type:"DISMISS_TOAST",toastId:s});return c({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||a()}}}),{id:s,dismiss:a,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function m(){let[e,t]=a.useState(o);return a.useEffect(()=>(d.push(t),()=>{let e=d.indexOf(t);e>-1&&d.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},3261:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(4057).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},2604:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(4057).A)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]])},6848:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(4057).A)("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]])},4815:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(4057).A)("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[2992,3644,8249,9680,8173,615,6814,8441,1517,7358],()=>t(8332)),_N_E=e.O()}]);